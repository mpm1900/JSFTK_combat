(this.webpackJsonpftkts=this.webpackJsonpftkts||[]).push([[0],{115:function(e,t,a){e.exports=a(222)},125:function(e,t){},127:function(e,t){},160:function(e,t){},161:function(e,t){},220:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),o=a.n(c),i=a(21),l=a.n(i),u=a(5),s=a(60),d=a(4),f=a(1),p={vigor:0,strength:0,intelligence:0,perception:0,talent:0,agility:0,luck:0,armor:0,resistance:0,evasion:0,healthOffset:0,criticalChance:0,damageModifier:0},m={blacksmith:{strength:76,vigor:80,intelligence:40,perception:52,talent:72,agility:56,luck:50,armor:2,resistance:0,evasion:7,healthOffset:0,criticalChance:5,damageModifier:0},hunter:{strength:52,vigor:66,intelligence:46,perception:78,talent:64,agility:78,luck:50,armor:1,resistance:0,evasion:20,healthOffset:0,criticalChance:5,damageModifier:0},scholar:{strength:42,vigor:60,intelligence:78,perception:66,talent:70,agility:70,luck:50,armor:0,resistance:1,evasion:13,healthOffset:0,criticalChance:5,damageModifier:0},bard:{strength:44,vigor:50,intelligence:70,perception:68,talent:78,agility:68,luck:50,armor:0,resistance:1,evasion:11,healthOffset:0,criticalChance:5,damageModifier:0}},g=a(223),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{id:Object(g.a)(),name:e}},b={bleeding:Object(f.a)({},h("Bleeding"),{type:"bleeding",canStack:!1,duration:5,traits:[],commitChance:50,committedTraits:[{duration:5,damage:0,stats:Object(f.a)({},p,{healthOffset:-10})}]}),burning:Object(f.a)({},h("Burning"),{type:"burning",canStack:!1,duration:5,traits:[],commitChance:100,committedTraits:[{duration:5,damage:0,stats:Object(f.a)({},p,{healthOffset:-10})}]}),frozen:Object(f.a)({},h("Frozen"),{type:"frozen",canStack:!1,duration:5,traits:[{duration:5,damage:0,stats:Object(f.a)({},p,{damageModifier:.25})}],commitChance:0,committedTraits:[]}),poisoned:Object(f.a)({},h("Poisoned"),{type:"poisoned",canStack:!0,duration:5,traits:[{duration:5,damage:0,stats:Object(f.a)({},p,{strength:-5,intelligence:-5,perception:-5,talent:-5})}],commitChance:100,committedTraits:[{duration:5,damage:0,stats:Object(f.a)({},p,{healthOffset:-5})}]})},y={damage:0,duration:-1,stats:p},O=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((function(e,t){return{vigor:e.strength+t.strength,strength:e.strength+t.strength,intelligence:e.intelligence+t.intelligence,perception:e.perception+t.perception,talent:e.talent+t.talent,agility:e.agility+t.agility,luck:e.luck+t.luck,armor:e.armor+t.armor,resistance:e.resistance+t.resistance,evasion:e.evasion+t.evasion,criticalChance:e.criticalChance+t.criticalChance,damageModifier:e.damageModifier+t.damageModifier,healthOffset:e.healthOffset+t.healthOffset}}),p)},v=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((function(e,t){return{damage:e.damage+t.damage,stats:O(e.stats,t.stats),duration:-1}}),y)},j=function(e){return e.reduce((function(e,t){return[].concat(Object(d.a)(e),Object(d.a)(t.traits))}),[])},E=a(106),x=function(e,t){return{key:e,offset:t}},k=function(e,t){var a=X(e,t),n=new E.DiceRoll("1d100");return{input:t,result:n.total<=a,total:n.total,averageTotal:n.averageTotal,maxTotal:n.maxTotal,minTotal:n.minTotal,output:n.output}},S=function(e,t){return t.map((function(t){return X(e,t)})).reduce((function(e,t){return e*(t/100)}),1)},C=function(e){return e[Math.floor(Math.random()*e.length)]},w=function(e){return e>0?e:0},T=function(e){if(e.processed)throw new Error("No Processed Parties Allowed");e.characters.forEach((function(e){K(e)}))},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(f.a)({},h(),{isParty:!0,characters:Array(e).fill(null).map((function(e,t){var a=C(["blacksmith","hunter","scholar"]);return Object(f.a)({},V(a),{name:"".concat(a," ").concat(t+1)})}))})},M=function(e,t){return e.characters.find((function(e){return e.id===t}))},D=function(e,t,a){return T(e),Object(f.a)({},e,{characters:e.characters.map((function(e){return e.id===t?a(e):e}))})},A=function(e){return Object(f.a)({},e,{processed:!0,characters:e.characters.map((function(t){return Object(f.a)({},U(t),{partyId:e.id})}))})},L=function(e){var t,a;switch(e.type){case"single":case"ally":case"self":return e.character?[e.character]:[];case"party":return(null===(t=e.party)||void 0===t?void 0:t.characters)||[];case"group":return(null===(a=e.party)||void 0===a?void 0:a.characters)||[];default:return[]}},$=function(e,t){return{type:e,character:F(t)?t:void 0,party:(a=t,a.isParty?t:void 0)};var a},R=function(e,t,a){var n=function(e,t){var a=k(e,{offset:e.stats.criticalChance}),n=k(e,t.accuracy),r=t.rolls.map((function(t){return k(e,t)})),c=a.result?t.rolls.length:r.filter((function(e){return e.result})).length,o=!!a.result||function(e){return e.every((function(e){return e.result}))}(r),i=a.result||o||n.result,l={damage:i?e.weapon.damage.damage*(1+t.damageModifier+e.stats.damageModifier):0,type:e.weapon.damage.type};return{rollResults:r,skill:t,source:e,accuracySuccess:i,criticalSuccess:a.result,passedCount:c,perfect:o,rawDamage:l,pierce:o&&t.perfectPierce||a.result,splashDamage:t.perfectSplash&&o?{type:l.type,damage:Math.floor(l.damage/2)}:{type:l.type,damage:0},addedStatus:o?t.perfectStatus:[]}}(t,e);return a.map((function(e){return function(e,t){if(t.accuracySuccess){var a=k(e,{key:"evasion"}),n=t.pierce?0:Q(e,t.rawDamage.type);return Object(f.a)({},t,{target:e,dodgeSuccess:!t.criticalSuccess&&a.result,blockedDamage:{type:t.rawDamage.type,damage:t.pierce?0:n},totalDamage:{type:t.rawDamage.type,damage:Math.round(t.rawDamage.damage-n)}})}return Object(f.a)({},t,{target:e,dodgeSuccess:!1,blockedDamage:t.rawDamage,totalDamage:t.rawDamage})}(e,n)}))},I=Object(f.a)({},h("Smash"),{damageModifier:0,targetType:"single",rolls:[x("strength"),x("strength"),x("strength")],accuracy:x("strength"),perfectSplash:!1,perfectPierce:!1,perfectStatus:[]}),B=Object(f.a)({},h("Shockwave"),{damageModifier:0,targetType:"single",rolls:[x("strength"),x("strength"),x("strength"),x("strength")],accuracy:x("strength",-10),perfectSplash:!0,perfectPierce:!1,perfectStatus:[]}),W=Object(f.a)({},h("Blacksmith's Hammer"),{type:"hammer",rarity:"common",hands:1,damage:{type:"physical",damage:10},traits:[],skills:[I,B]}),H=Object(f.a)({},h("Shot"),{damageModifier:0,targetType:"single",rolls:[x("perception"),x("perception"),x("perception")],accuracy:x("perception"),perfectSplash:!1,perfectPierce:!1,perfectStatus:[]}),N=Object(f.a)({},h("Snipe Shot"),{damageModifier:0,targetType:"single",rolls:[x("perception"),x("perception"),x("perception")],accuracy:x("perception",-10),perfectSplash:!1,perfectPierce:!0,perfectStatus:[]}),_=Object(f.a)({},h("Blacksmith's Hammer"),{type:"bow",rarity:"common",hands:2,damage:{type:"physical",damage:6},traits:[{duration:-1,stats:Object(f.a)({},p,{evasion:3}),damage:0}],skills:[H,N]}),z=Object(f.a)({},h("Surge"),{damageModifier:-.2,targetType:"single",rolls:[x("intelligence"),x("intelligence"),x("intelligence")],accuracy:x("intelligence"),perfectSplash:!1,perfectPierce:!0,perfectStatus:[]}),Y=Object(f.a)({},h("Area Blast"),{damageModifier:-.5,targetType:"group",rolls:[x("intelligence"),x("intelligence"),x("intelligence")],accuracy:x("intelligence",-5),perfectSplash:!1,perfectPierce:!0,perfectStatus:[]}),q={blacksmith:W,hunter:_,scholar:Object(f.a)({},h("Scholar's Book"),{type:"tome",rarity:"common",hands:2,damage:{type:"magic",damage:6},traits:[],skills:[z,Y]}),bard:W},K=function(e){if(e.processed)throw new Error("No Processed Characters Allowed")},F=function(e){return e.isCharacter},G=function(e){return e.status.map((function(e){return b[e.type]}))},J=function(e){return K(e),[].concat(Object(d.a)(e.weapon.skills),Object(d.a)(e.armor.reduce((function(e,t){return[].concat(Object(d.a)(e),Object(d.a)(t.skills))}),[])))},U=function(e){K(e);var t=function(e){return K(e),[].concat(Object(d.a)(e.traits),Object(d.a)(e.weapon.traits),Object(d.a)(j(e.armor)),Object(d.a)(j(G(e))))}(e),a=v.apply(void 0,Object(d.a)(t)),n=O(e.stats,a.stats),r=function(e){var t=e.traits.reduce((function(e,t){return Object(f.a)({},e,{damage:e.damage+t.damage})}),e.damage);return Object(f.a)({},e,{damage:t,processed:!0})}(e.weapon),c=G(e),o=J(e),i=25+Math.floor(.1*m[e.class].vigor),l=Math.floor(i+e.level+.1*e.level*n.vigor);return Object(f.a)({},e,{health:l,stats:n,weapon:r,statusEffects:c,skills:o,dead:n.healthOffset>=l,processed:!0})},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(f.a)({},h(),{isCharacter:!0,partyId:t,level:1,class:e,stats:m[e],traits:[],weapon:q[e],armor:[],status:[]})},X=function(e,t){return(t.key?e.stats[t.key]:0)+(t.offset||0)},Q=function(e,t){return console.log(t,e.stats),"physical"===t?e.stats.armor:"magic"===t?e.stats.resistance:0},Z=a(8),ee=a(23),te=a(15),ae=function(e){return{type:"@actions/parties/set-party",payload:{party:e}}},ne=function(e){return{type:"@actions/parties/upsert-character",payload:{character:e}}},re=function(e){return{type:"@actions/parties/delete-character",payload:{characterId:e}}},ce={updateParty:function(e){return function(t){T(e),t(ae(e))}},upsertCharacter:function(e){return function(t){t(ne(e))}},deleteCharacter:function(e){return function(t){t(re(e))}}},oe=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0,r=e[n.type];return r?r(a,n):a}}((n={},Object(Z.a)(n,"@actions/parties/set-party",(function(e,t){return Object(f.a)({},t.payload.party)})),Object(Z.a)(n,"@actions/parties/upsert-character",(function(e,t){return D(e,t.payload.character.id,(function(e){return t.payload.character}))})),Object(Z.a)(n,"@actions/parties/delete-character",(function(e,t){return Object(f.a)({},e,{characters:e.characters.filter((function(e){return e.id!==t.payload.characterId}))})})),n),{isParty:!0,id:Object(g.a)(),name:"PlayerParty",characters:[Object(f.a)({},V("blacksmith"),{name:"max m"}),Object(f.a)({},V("hunter"),{name:"katie c"}),Object(f.a)({},V("scholar"),{name:"milo w"})]}),ie=function(){return function(e,t){var a=Object(ee.b)();return Object(c.useMemo)((function(){return Object(te.b)(e,a)}),t?[a].concat(Object(d.a)(t)):[a])}(ce)},le={rawParty:P(),party:A(P()),updateParty:function(e){},upsertCharacter:function(e){},deleteCharacter:function(e){},findCharacter:function(e){},findRawCharacter:function(e){}},ue=o.a.createContext(le),se=function(e){var t=e.children,a=ie(),n=Object(ee.c)((function(e){return e.party})),r=Object(c.useMemo)((function(){return A(n)}),[n]);return o.a.createElement(ue.Provider,{value:{party:r,rawParty:n,updateParty:function(e){a.updateParty(e)},upsertCharacter:function(e){if(e){if(e.processed)throw new Error("No processed Characters Allowed");a.upsertCharacter(e)}},deleteCharacter:function(e){a.deleteCharacter(e)},findCharacter:function(e){return M(r,e)},findRawCharacter:function(e){return M(n,e)}}},t)},de={party:A(P()),enemyParty:A(P()),activeCharacter:U(V("blacksmith")),queue:[],selectedSkill:void 0,selectedTargets:[],roundResults:[],activeRound:void 0,isRunning:!1,isDone:!1,onSkillSelect:function(e){},onTargetsSelect:function(e){},start:function(){},next:function(){},commit:function(){}},fe=Object(c.createContext)(de),pe=function(){return Object(c.useContext)(fe)},me=function(e){var t=e.children,a=e.enemyParty,n=e.rawEnemyParty,r=e.setEnemyParty,i=Object(c.useContext)(ue),l=i.party,p=i.rawParty,m=i.updateParty,g=Object(c.useMemo)((function(){return function(e,t){return function(a){var n=function(e,t,a){return D(e,t,a)};return a.forEach((function(a){var r=a.source,c=(a.target,e.id===r.partyId?e:t),o=e.id===r.partyId?t:e;o=n(o,a.target.id,(function(e){return Object(f.a)({},e,{stats:Object(f.a)({},e.stats,{healthOffset:e.stats.healthOffset+a.totalDamage.damage})})})),a.splashDamage.damage>0&&o.characters.filter((function(e){return e.id!==a.target.id})).forEach((function(e){o=n(o,e.id,(function(e){return Object(f.a)({},e,{stats:Object(f.a)({},e.stats,{healthOffset:e.stats.healthOffset+a.splashDamage.damage})})}))})),c.id===e.id?(e=c,t=o):(e=o,t=c)})),{party:e,enemyParty:t}}}(p,n)}),[p,n]),h=Object(c.useState)(!1),b=Object(u.a)(h,2),y=b[0],O=b[1],v=Object(c.useState)(!1),j=Object(u.a)(v,2),E=j[0],x=j[1],k=Object(c.useMemo)((function(){return[].concat(Object(d.a)(l.characters),Object(d.a)(a.characters)).filter((function(e){return!e.dead}))}),[l,a]),S=Object(c.useState)(k.sort((function(e,t){return t.stats.agility-e.stats.agility})).map((function(e){return e.id}))),w=Object(u.a)(S,2),T=w[0],P=w[1],M=Object(c.useState)([]),A=Object(u.a)(M,2),I=A[0],B=A[1],W=Object(c.useState)(),H=Object(u.a)(W,2),N=H[0],_=H[1],z=Object(c.useState)(),Y=Object(u.a)(z,2),q=Y[0],K=Y[1],F=Object(c.useState)(),G=Object(u.a)(F,2),J=G[0],U=G[1],V=Object(c.useMemo)((function(){return k.find((function(e){return e.id===T[0]}))}),[T,k]);return Object(c.useEffect)((function(){if(V){if(V.partyId===a.id){var e=C(V.skills),t=C(function(e,t){var n=l.id===e?l:a,r=l.id===e?a:l;switch(t.targetType){case"single":return r.characters.filter((function(e){return!e.dead}));case"ally":return n.characters.filter((function(e){return!e.dead}));case"group":return[r];case"party":return[n];case"self":return[V];default:return[]}}(V.partyId,e));!function(e,t){var a=R(e,V,L(t));_(a)}(e,$(e.targetType,t))}}else T.length>0&&P((function(e){var t=Object(s.a)(e),a=t[0],n=t.slice(1);return[].concat(Object(d.a)(n),[a]).filter((function(e){return void 0!==k.find((function(t){return t.id===e}))}))}))}),[(V||{}).id]),Object(c.useEffect)((function(){if(!E)return a.characters.every((function(e){return e.dead}))?(alert("you win"),void x(!0)):l.characters.every((function(e){return e.dead}))?(x(!0),void alert("you lose")):void 0}),[l,a]),o.a.createElement(fe.Provider,{value:{party:l,enemyParty:a,queue:T.map((function(e){return k.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e})),activeCharacter:V,activeRound:N,selectedSkill:J,selectedTargets:q?L(q):[],roundResults:I,isDone:E,isRunning:y,onSkillSelect:function(e){U(e),e.targetType!==(null===J||void 0===J?void 0:J.targetType)&&K(void 0)},onTargetsSelect:function(e){J&&K($(J.targetType,e))},start:function(){return O(!0)},next:function(){if(J&&q){var e=R(J,V,L(q));_(e)}},commit:function(){if(N){var e=g(N);r(e.enemyParty),m(e.party),U(void 0),K(void 0),B((function(e){return[].concat(Object(d.a)(e),[N])})),_(void 0),P((function(e){var t=Object(s.a)(e),a=t[0],n=t.slice(1);return[].concat(Object(d.a)(n),[a]).filter((function(e){return void 0!==k.find((function(t){return t.id===e}))}))}))}}}},t)},ge=a(114),he=a(63),be=a.n(he),ye=a(108),Oe=function(e){var t=e.delay,a=void 0===t?500:t,n=e.children,r=Object(c.useState)(!1),i=Object(u.a)(r,2),l=i[0],s=i[1],d=Object(c.useState)(!1),f=Object(u.a)(d,2),p=f[0],m=f[1],h=Object(c.useState)(Object(g.a)()),b=Object(u.a)(h,2),y=b[0],O=b[1];Object(c.useLayoutEffect)((function(){(function(){var e=Object(ye.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l&&setTimeout((function(){O(Object(g.a)())}),a);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(c.useLayoutEffect)((function(){l&&m(!0)}),[y]);return o.a.createElement("div",{onMouseEnter:function(e){e.preventDefault(),e.stopPropagation(),s(!0)},onMouseLeave:function(e){e.preventDefault(),e.stopPropagation(),s(!1),m(!1)}},n({isHovering:p}))},ve=function(e){var t=e.style,a=void 0===t?{}:t,n=e.substyle,r=void 0===n?{}:n,c=e.children,i=e.tag,l=void 0===i?"div":i,u=Object(ge.a)(e,["style","substyle","children","tag"]);return o.a.createElement("div",{style:Object(f.a)({border:"1px solid #000",display:"flex",boxSizing:"border-box"},a)},o.a.createElement(l,Object.assign({style:Object(f.a)({border:r.border||"1px solid #555",background:"linear-gradient(0deg, #222222 0%, #2a2a2a 100%)",padding:10,color:"#ccc",flex:1,boxShadow:"inset 0px 0px 2px black"},r)},u),c))},je=a(9),Ee=Object(je.b)("div",(function(e){return{display:"flex",flexDirection:e.$direction||"row",flex:e.$full?1:"default"}})),xe=Object(je.b)("div",(function(){return{flex:1}})),ke=Object(je.b)("span",(function(){return{fontFamily:"Inconsolata, monospace",fontWeight:600}})),Se=Object(je.b)("div",(function(){return{fontFamily:"Inconsolata, monospace",fontWeight:600}})),Ce=function(e,t){return o.a.createElement("span",{style:{color:e,fontWeight:"bold"}},t)},we=Object(c.createContext)({combatLog:[]}),Te=function(e){var t=e.children,a=pe(),n=a.roundResults,r=a.enemyParty,i=a.party,l=Object(c.useState)([]),s=Object(u.a)(l,2),p=s[0],m=s[1],g=Object(c.useState)({}),h=Object(u.a)(g,2),b=h[0],y=h[1],O=function(e,t){return function(a){var n=a.partyId===e.id,r=a.partyId===t.id;return Ce(n?"lightgreen":r?"lightsalmon":"white",a.name)}}(i,r),v=function(e){return m((function(t){return[].concat(Object(d.a)(t),[o.a.createElement(ke,{style:{display:"inline-block",fontWeight:"normal"}},e)])}))};return Object(c.useEffect)((function(){[].concat(Object(d.a)(r.characters),Object(d.a)(i.characters)).forEach((function(e){e.dead&&!b[e.id]&&(y((function(t){return Object(f.a)({},t,Object(Z.a)({},e.id,!0))})),v(o.a.createElement("span",null,Ce("lightcoral","".concat(e.name," died.")))))}))}),[r,i]),Object(c.useEffect)((function(){0!==n.length&&n[n.length-1].forEach((function(e){var t,a=i.id===e.source.partyId?r:i;v(o.a.createElement("span",null,O(e.source)," uses ",(t=e.skill,Ce("plum",t.name)),".")),e.accuracySuccess?(e.dodgeSuccess?v(o.a.createElement("span",null,O(e.target)," dodged the attack.")):(v(o.a.createElement("span",null,e.skill.name," deals"," ",Ce("white","".concat(e.totalDamage.damage," damage"))," to"," ",O(e.target),".")),e.perfect&&v(o.a.createElement("span",null,Ce("gold","Perfect!")))),e.splashDamage.damage>0&&a.characters.filter((function(t){return t.id!==e.target.id})).forEach((function(t){v(o.a.createElement("span",null,e.skill.name," deals"," ",Ce("white","".concat(e.splashDamage.damage," damage"))," to"," ",O(t),"."))}))):v(o.a.createElement("span",null,e.source.name,"'s attack missed."))}))}),[n.length]),o.a.createElement(we.Provider,{value:{combatLog:p}},t)},Pe=a(109),Me=a.n(Pe),De=function(e){var t=Object.assign({},e);return o.a.createElement(Me.a,Object.assign({direction:"up",tagName:"div",padding:"0",arrow:!1},t))},Ae=function(e){return o.a.createElement(Oe,null,(function(t){var a=t.isHovering;return o.a.createElement(De,Object.assign({},e,{isOpen:a}))}))},Le=function(e){var t=e.name,a=void 0===t?"":t,n=e.value,r=e.max,c=e.color,i=e.height,l=void 0===i?30:i,u=e.children,s=n/r*100,d=s>100?100:s;return o.a.createElement(Ae,{direction:"right",content:o.a.createElement(ve,null,"".concat(a," (").concat(n," / ").concat(r,")"))},o.a.createElement(ve,{substyle:{padding:0,background:"#555",height:l-2,position:"relative"}},o.a.createElement(Ee,{style:{position:"absolute",left:0,boxSizing:"border-box",height:l-2,maxWidth:"".concat(d,"%"),minWidth:"".concat(d,"%"),boxShadow:"inset 0px 0px 1px rgba(0,0,0,0.5)",textShadow:"1px 1px 1px black",backgroundColor:c,color:"white",alignItems:"center",justifyContent:"center",transition:"all 0.5s"}}),o.a.createElement(xe,{style:{position:"absolute",height:l,lineHeight:"".concat(l-2,"px"),right:4,top:0,fontSize:10,fontWeight:"bold",overflow:"hidden",textShadow:"0px 0px 3px black"}},o.a.createElement(Se,null,u))))},$e=Object(je.b)(Se,(function(){return{height:15,fontSize:"12px",fontWeight:"bolder",padding:"0px 4px",lineHeight:"15px",flex:1,textAlign:"center",background:"#111"}})),Re=Object(je.b)("div",(function(e){var t=e.$selected,a=e.$active;return{":hover":{boxShadow:e.$hoverable&&!t?"0px 0px 20px black":void 0},margin:10,boxShadow:e.$isHovering?"0px 0px 20px black":t?"0px 0px 10px black":a?"0px 0px 20px white":"none",transition:"all 0.1s"}})),Ie=function(e){var t=e.character,a=e.activeCharacter,n=e.hoverable,r=e.selected,c=e.isHovering,i=e.onClick,l=t.health-t.stats.healthOffset;return o.a.createElement(Re,{$hoverable:n,$active:t.id===a.id,$selected:r,$isHovering:c},o.a.createElement(ve,{onClick:function(){return i?i():null},style:{borderWidth:2,cursor:i?"pointer":"default"},substyle:{padding:0,width:380}},o.a.createElement(Ee,{style:{border:"2px solid black"}},o.a.createElement(Ee,{style:{borderRight:"2px solid black"}},o.a.createElement("img",{alt:"profile",src:"https://picsum.photos/seed/".concat(t.name,"/60/60"),style:{height:115,width:115}})),o.a.createElement(Ee,{$full:!0,$direction:"column"},o.a.createElement(Ee,{style:{padding:"2px 4px",paddingLeft:8,background:"rgba(255,255,255,0.2)",borderBottom:"1px solid rgba(255,255,255,0.4)"}},o.a.createElement("span",{style:{fontWeight:"bolder",textShadow:"0px 0px 2px black"}},t.name)),o.a.createElement(Ee,null,o.a.createElement("span",{style:{fontWeight:"bolder",padding:"2px 8px",fontSize:42,height:42,lineHeight:"42px"}},l>0?l:"Dead")),o.a.createElement(xe,null),o.a.createElement(Le,{name:"Health",color:"#8f4e4d",max:t.health,value:w(l),height:12},w(l),"/",t.health),o.a.createElement(Le,{name:"XP",color:"#5e8575",max:3300,value:1256,height:12},"1256/3300"),o.a.createElement(Ee,null,o.a.createElement($e,null,"S-",t.stats.strength),o.a.createElement($e,null,"V-",t.stats.vigor),o.a.createElement($e,null,"I-",t.stats.intelligence),o.a.createElement($e,null,"P-",t.stats.perception),o.a.createElement($e,null,"T-",t.stats.talent),o.a.createElement($e,null,"A-",t.stats.agility),o.a.createElement($e,null,"L-",t.stats.luck))))))},Be=a(110),We=a.n(Be),He={isOpen:!1,contents:null,callback:null,payload:null,blocking:!1,style:{}},Ne="modalContext/OPEN",_e="modalContext/CLOSE",ze=function(e,t,a,n){return{type:Ne,contents:e,style:t,blocking:a,callback:n}},Ye=function(){return{type:_e}},qe=function(e){return{type:"modalContext/SET_PAYLOAD",payload:e}},Ke=function(e){return{type:"modalContext/SET_CONTENTS",contents:e}},Fe=function(e){return{type:"modalContext/SET_CALLBACK",callback:e}},Ge=function(e){return{type:"modalContext/SET_BLOCKING",blocking:e}},Je=function(e){return{type:"modalContext/SET_STYLE",style:e}},Ue=(r={},Object(Z.a)(r,Ne,(function(e,t){return Object(f.a)({},e,{isOpen:!0,contents:t.contents?t.contents:e.contents,style:t.style?t.style:e.style||{},blocking:t.blocking||!1,callback:t.callback?t.callback:e.callback})})),Object(Z.a)(r,_e,(function(e){return Object(f.a)({},e,{isOpen:!1})})),Object(Z.a)(r,"modalContext/SET_PAYLOAD",(function(e,t){return Object(f.a)({},e,{payload:t.payload})})),Object(Z.a)(r,"modalContext/SET_CONTENTS",(function(e,t){return Object(f.a)({},e,{callback:null,payload:null,contents:t.contents,blocking:!1,style:{}})})),Object(Z.a)(r,"modalContext/SET_CALLBACK",(function(e,t){return Object(f.a)({},e,{callback:t.callback})})),Object(Z.a)(r,"modalContext/SET_BLOCKING",(function(e,t){return Object(f.a)({},e,{blocking:t.blocking})})),Object(Z.a)(r,"modalContext/SET_STYLE",(function(e,t){return Object(f.a)({},e,{style:t.style})})),r),Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0,a=Ue[t.type];return a?a(e,t):e},Xe=o.a.createContext({open:function(){return null},close:function(){return null},setBlocking:function(){return null},setPayload:function(){return null},setContents:function(){return null},setCallback:function(){return null},setStyle:function(){return null}}),Qe=function(){return Object(c.useContext)(Xe)},Ze=function(e,t){return{isOpen:e.isOpen,open:function(e,a,n,r){t(ze(e,a,n,r))},close:function(a){e.callback&&e.callback(a||e.payload),t(Ye())},setPayload:function(e){return t(qe(e))},setContents:function(e){return t(Ke(e))},setCallback:function(e){return t(Fe(e))},setBlocking:function(e){return t(Ge(e))},setStyle:function(e){return t(Je(e))}}},et=function(e){var t=e.children,a=Object(c.useReducer)(Ve,He),n=Object(u.a)(a,1)[0],r=Object(c.useMemo)((function(){return Ze.apply(void 0,Object(d.a)(a))}),[a]);return o.a.createElement(Xe.Provider,{value:r},t,o.a.createElement(We.a,{isOpen:n.isOpen,onRequestClose:function(){n.blocking||r.close()},style:{content:{backgroundColor:"#111",color:"white",width:400,margin:"0 auto",bottom:"unset",borderColor:"#555"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"}}},n.contents||o.a.createElement("div",null)))},tt=function(){var e=pe(),t=e.activeRound,a=e.commit,n=Qe(),r=n.open,i=n.close;n.setCallback;return Object(c.useEffect)((function(){t&&r(o.a.createElement(at,{rounds:t,close:function(){return i(!0)}}),{},!0,(function(){a()}))}),[t,r,i,a]),null},at=function(e){var t=e.rounds,a=e.close,n=t[0],r=Object(c.useState)([].concat(Object(d.a)(n.rollResults.map((function(e,t){return{label:n.skill.rolls[t].key||"<NULL>",result:void 0}}))),[{label:"accuracy",result:void 0}])),i=Object(u.a)(r,2),l=i[0],s=i[1],f=Object(c.useState)(0),p=Object(u.a)(f,2),m=p[0],g=p[1],h=function(e,t){return s((function(a){return a.map((function(a,n){return n===t?e:a}))}))};Object(c.useEffect)((function(){n&&(m<l.length-1?setTimeout((function(){h({label:n.skill.rolls[m].key||"<NULL>",result:n.rollResults[m].result},m),g((function(e){return e+1}))}),200):m===l.length?setTimeout((function(){a()}),600):setTimeout((function(){h({label:"accuracy",result:n.accuracySuccess},m)}),200))}),[l]);var b=t.length>1?"".concat(t.length," characters"):n.target.name;return o.a.createElement(Ee,{$direction:"column",style:{textAlign:"center"}},o.a.createElement("h4",{style:{margin:"0 0 20px 0"}},n.source.name," uses ",n.skill.name," on ",b),o.a.createElement(Ee,{style:{justifyContent:"center"}},l.map((function(e){return o.a.createElement(Ee,{$direction:"column",style:{marginRight:10}},o.a.createElement("span",null,void 0===e.result?Ce("rgba(255,255,255,0.4)",e.label):!0===e.result?Ce("lightgreen",e.label):Ce("lightcoral",e.label)))}))))},nt=Object(je.b)("button",(function(e){return{cursor:"pointer",background:"#222",boxShadow:"inset 0px 0px 3px black",textShadow:"inset 0px 1px 3px black",border:"1px solid #555",color:"rgba(255,255,255,1)",":hover":{border:"1px solid #999"},":active":{outline:"none",border:"1px solid #ccc"},":focus":{outline:"none"},padding:"10px 30px"}})),rt=function(){var e=pe(),t=e.activeCharacter,a=e.selectedSkill,n=e.selectedTargets,r=e.onSkillSelect;e.next;if(!t)return null;var c=a?S(t,a.rolls):0,i=1-(1-c)*(1-(a?S(t,[a.accuracy]):0)),l=n.length>0&&a?function(e,t,a){var n={type:t.weapon.damage.type,damage:t.weapon.damage.damage*(1+e.damageModifier+t.stats.damageModifier)},r=Q(a,n.type);return console.log(n,r),{type:n.type,damage:Math.round(n.damage-r)}}(a,t,n[0]).damage:0;return o.a.createElement(ve,{substyle:{color:"rgba(255,255,255,0.8)",minWidth:300}},o.a.createElement("h2",{style:{marginTop:0,textAlign:"center"}},a?0===n.length?"Choose a Target":"Confirm Action":"Choose a Skill"),o.a.createElement(Ee,{style:{justifyContent:"space-around"}},t.skills.map((function(e){return o.a.createElement(nt,{onClick:function(){return r(e)},style:{background:"#111",borderColor:a&&e.id===a.id?"white":void 0}},e.name)}))),a&&o.a.createElement(ve,{style:{marginTop:10},substyle:{background:"#111"}},o.a.createElement(Ee,{$direction:"column",style:{alignItems:"center"}},o.a.createElement("span",null,"Target: ",a.targetType),o.a.createElement("span",null,"Perect: (",Math.floor(100*c),"%)"),o.a.createElement("span",null,"Accuracy: (",Math.floor(100*i),"%)"),l>0&&o.a.createElement("span",null,"Base Damage: ",l))))},ct=function(e){var t=e.party,a=pe(),n=a.activeCharacter,r=a.selectedSkill,i=a.selectedTargets,l=a.onTargetsSelect,s=a.next,d=Object(c.useState)(!1),f=Object(u.a)(d,2),p=f[0],m=f[1];return o.a.createElement(Ee,{$direction:"column"},o.a.createElement(Ee,{style:{justifyContent:"space-around",cursor:"group"===(null===r||void 0===r?void 0:r.targetType)?"pointer":"default"},onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},onClick:function(){r&&"group"===r.targetType&&l(t)}},t.characters.map((function(e){return o.a.createElement("div",null,o.a.createElement(Ie,{hoverable:void 0!==r,isHovering:p&&"group"===(null===r||void 0===r?void 0:r.targetType),selected:void 0!==i.find((function(t){return t.id===e.id})),onClick:function(){r&&"single"===r.targetType&&l(e)},activeCharacter:n,character:e}),r&&"single"===r.targetType&&i.length>0&&i[0].id===e.id&&o.a.createElement(Ee,{style:{justifyContent:"center"}},o.a.createElement("div",{style:{boxShadow:"0px 2px 5px black"}},o.a.createElement(nt,{onClick:function(){return s()},style:{borderTop:"none",padding:"10px 30px",boxShadow:"inset 0px 2px 8px black"}},"Confirm"))))}))),r&&"group"===r.targetType&&i.length>0&&o.a.createElement(Ee,{style:{justifyContent:"center"}},o.a.createElement("div",{style:{boxShadow:"0px 2px 5px black"}},o.a.createElement(nt,{onClick:function(){return s()},style:{borderTop:"none",padding:"10px 30px",boxShadow:"inset 0px 2px 8px black"}},"Confirm"))))},ot=function(){var e=pe(),t=e.party,a=e.enemyParty,n=e.activeCharacter,r=e.queue,i=e.isDone,l=e.isRunning,u=e.start,s=Qe(),d=s.open,f=s.close,p=Object(c.useContext)(we).combatLog;return Object(c.useEffect)((function(){l||(d(o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("h1",null,"Combat Start!"))),setTimeout((function(){f(),u()}),500))}),[]),Object(c.useEffect)((function(){i&&d(o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("h4",null,"Refresh to do combat again")))}),[i]),l?n?o.a.createElement(Ee,{style:{height:"100vh"}},o.a.createElement(Ee,{$full:!0,$direction:"column"},o.a.createElement(ve,null,r.map((function(e){return o.a.createElement("span",null,e.name," ",">")}))),o.a.createElement(Ee,{$direction:"column",$full:!0,style:{padding:"30px 10px"}},o.a.createElement(ct,{party:a}),o.a.createElement(Ee,{$full:!0},o.a.createElement(xe,null),o.a.createElement(Ee,{$direction:"column"},o.a.createElement(xe,null),o.a.createElement(rt,null),o.a.createElement(tt,null),o.a.createElement(xe,null)),o.a.createElement(xe,null)),o.a.createElement(Ee,{style:{justifyContent:"space-around"}},t.characters.map((function(e){return o.a.createElement("div",null,o.a.createElement(Ie,{activeCharacter:n,character:e}))}))))),o.a.createElement(ve,{substyle:{minWidth:300,fontSize:12,overflowY:"auto",display:"flex",flexDirection:"column"}},p.map((function(e){return e})))):o.a.createElement("span",null,"refresh to do combat again"):null},it=function(){var e=Object(c.useState)(P(3)),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(c.useMemo)((function(){return A(a)}),[a]);return o.a.createElement(me,{enemyParty:r,rawEnemyParty:a,setEnemyParty:n},o.a.createElement(Te,null,o.a.createElement(et,null,o.a.createElement(ot,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(220);var lt=a(113),ut=a(111),st=new lt.a,dt=Object(te.e)(Object(te.c)({party:oe}),Object(te.d)(Object(te.a)(ut.a)));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ee.a,{store:dt},o.a.createElement(je.a,{value:st,debug:void 0,debugAfterHydration:!0},o.a.createElement(se,null,o.a.createElement(it,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[115,1,2]]]);
//# sourceMappingURL=main.d2cc2585.chunk.js.map